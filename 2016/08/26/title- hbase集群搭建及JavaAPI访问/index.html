<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="This is an individual blog, please ........"><title>hbase集群搭建及JavaAPI访问 | WELCOME TO HUANGRONG'S BLOG</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">hbase集群搭建及JavaAPI访问</h1><a id="logo" href="/.">WELCOME TO HUANGRONG'S BLOG</a><p class="description">LIFE IS MORE THAN LEARNING AND WORKING</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">hbase集群搭建及JavaAPI访问</h1><div class="post-meta">Aug 26, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2016/08/26/title- hbase集群搭建及JavaAPI访问/" href="/2016/08/26/title- hbase集群搭建及JavaAPI访问/#comments" class="ds-thread-count"></a><div class="post-content"><p>与传统的数据库相比，hbase在存储量、存储灵活性、查询、吞吐量有很大的优势，成为了不少企业存储数据的重要选择，下面就为大家介绍如何搭建hbase集群以及使用Java API对hbase进行访问。</p>
<hr>
<h2 id="Hbase简介"><a href="#Hbase简介" class="headerlink" title="Hbase简介"></a>Hbase简介</h2><p>Hbase是Hadoop数据库，用于存储海量数据，是结构化的数据管理系统，可以任意访问一行，随机访问、实时读写大数据。相比于mysql，hbase的存储更加灵活，可以动态的添加列，下表为hbase的表结构</p>
<p><img src="/img/1.png" alt=""></p>
<p>hbase的特点如下</p>
<ul>
<li>[x] 列是动态的</li>
<li>[x] 实例某个value需要行健、列族、列和版本号</li>
<li>[x] 建表的时候需要表名和列族</li>
<li>[x] 存储的数据只有一种类型byte[]</li>
</ul>
<h3 id="2-机器规划"><a href="#2-机器规划" class="headerlink" title="2. 机器规划"></a>2. 机器规划</h3><p>Hbase集群依赖于Hadoop集群，hadoop集群依赖于zookeeper集群。实验机器为三台，对各个机器的安排如下图</p>
<p><img src="/img/2.png" alt=""></p>
<h3 id="3-搭建过程"><a href="#3-搭建过程" class="headerlink" title="3.搭建过程"></a>3.搭建过程</h3><h4 id="3-1机器准备"><a href="#3-1机器准备" class="headerlink" title="3.1机器准备"></a>3.1机器准备</h4><ul>
<li><p>[x] 关闭防火墙，避免给后续操作造成不必要的麻烦，执行以下命令</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo service iptables <span class="built_in">stop</span> <span class="comment">//关闭防火墙</span></div><div class="line">sudo chkconfig iptables off <span class="comment">//确认防火墙不自动开启</span></div><div class="line">sudo service iptables status <span class="comment">//查看防火墙状态</span></div></pre></td></tr></table></figure>
</li>
<li><p>[x] 绑定主机名和ip，三台机器都要配置</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo vi /etc/hosts <span class="comment">//修改hosts文件，内容如下：</span></div><div class="line"><span class="number">192.168</span><span class="number">.180</span><span class="number">.60</span>  BJIDC-CMM23</div><div class="line"><span class="number">192.168</span><span class="number">.180</span><span class="number">.70</span>  BJIDC-CMM24</div><div class="line"><span class="number">192.168</span><span class="number">.180</span><span class="number">.80</span>  BJIDC-CMM25</div></pre></td></tr></table></figure>
</li>
<li><p>[x] 将所需的安装包上传至机器，分别是</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">zookeeper-3</span><span class="selector-class">.4</span><span class="selector-class">.5</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div><div class="line"><span class="selector-tag">hadoop-2</span><span class="selector-class">.4</span><span class="selector-class">.1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div><div class="line"><span class="selector-tag">hbase-0</span><span class="selector-class">.96</span><span class="selector-class">.2-hadoop2-bin</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>说明：在hadoop2.X中通常由两个NameNode组成，一个处于active状态，另一个处于standby状态。Active NameNode对外提供服务，而Standby NameNode则不对外提供服务，仅同步active namenode的状态，以便能够在它失败时快速进行切换。<br>在本方案中，主备NameNode之间通过一组JournalNode同步元数据信息，一条数据只要成功写入多数JournalNode即认为写入成功。通常配置奇数个JournalNode<br>这里还配置了一个zookeeper集群，用于ZKFC（DFSZKFailoverController）故障转移，当Active NameNode挂掉了，会自动切换Standby NameNode为standby状态</p>
<ul>
<li>[x] 安装JDK，安装目录为/usr/java/jdk1.8.0_92，并配置环境变量</li>
<li>[x] ssh免登陆，分别在三台机器生成钥匙，再拷贝至三台机器，下面以BJIDC-CMM23为例进行操作说明<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">cd .ssh</div><div class="line">ssh-keygen –t rsa</div><div class="line">ssh-<span class="keyword">copy</span>-<span class="keyword">id</span> BJIDC-<span class="built_in">CMM23</span></div><div class="line">ssh-<span class="keyword">copy</span>-<span class="keyword">id</span> BJIDC-<span class="built_in">CMM24</span></div><div class="line">ssh-<span class="keyword">copy</span>-<span class="keyword">id</span> BJIDC-<span class="built_in">CMM25</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="3-2安装zookeeper集群（仅在BJIDC-CMM23上操作）"><a href="#3-2安装zookeeper集群（仅在BJIDC-CMM23上操作）" class="headerlink" title="3.2安装zookeeper集群（仅在BJIDC-CMM23上操作）"></a>3.2安装zookeeper集群（仅在BJIDC-CMM23上操作）</h4><ul>
<li><p>[x] 解压</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf zookeeper-<span class="number">3.4</span>.<span class="number">5</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /home/cmm/app/</div></pre></td></tr></table></figure>
</li>
<li><p>[x] 修改配置文件</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">cd <span class="regexp">/app/</span>zookeeper<span class="number">-3.4</span><span class="number">.5</span><span class="regexp">/conf/</span></div><div class="line">cp zoo_sample.cfg zoo.cfg</div><div class="line">vim zoo.cfg</div><div class="line">修改：dataDir=<span class="regexp">/ /</span>zookeeper<span class="number">-3.4</span><span class="number">.5</span>/data</div><div class="line">在最后添加：home<span class="regexp">/cmm/</span>app</div><div class="line">server<span class="number">.1</span>= BJIDC-<span class="string">CMM23:</span><span class="number">2888</span>:<span class="number">3888</span></div><div class="line">server<span class="number">.2</span>= BJIDC-<span class="string">CMM24:</span><span class="number">2888</span>:<span class="number">3888</span></div><div class="line">server<span class="number">.3</span>= BJIDC-<span class="string">CMM25:</span><span class="number">2888</span>:<span class="number">3888</span></div><div class="line">保存退出</div><div class="line">然后创建一个data文件夹</div><div class="line">mkdir <span class="regexp">/home/</span>cmm<span class="regexp">/app /</span>zookeeper<span class="number">-3.4</span><span class="number">.5</span>/data</div><div class="line">再创建一个空文件</div><div class="line">touch <span class="regexp">/home/</span>cmm<span class="regexp">/app /</span>zookeeper<span class="number">-3.4</span><span class="number">.5</span><span class="regexp">/ data /</span>myid</div><div class="line">最后向该文件写入ID</div><div class="line">echo <span class="number">1</span> &gt; <span class="regexp">/home/</span>cmm<span class="regexp">/app /</span>zookeeper<span class="number">-3.4</span><span class="number">.5</span><span class="regexp">/ data /</span>myid</div></pre></td></tr></table></figure>
</li>
<li><p>[x] 将配置好的zookeeper拷贝到其他节点</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">scp -r <span class="meta-keyword">/app/</span>zookeeper<span class="number">-3.4</span><span class="number">.5</span>/ cmm@ BJIDC-CMM24: <span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span></div><div class="line">scp -r <span class="meta-keyword">/app/</span>zookeeper<span class="number">-3.4</span><span class="number">.5</span>/ cmm@ BJIDC-CMM25: <span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span></div><div class="line">注意：修改BJIDC-CMM24、BJIDC-CMM25对应zookeeper3<span class="number">.4</span><span class="number">.5</span><span class="meta-keyword">/data/</span>myid内容</div><div class="line">BJIDC-CMM24：echo <span class="number">2</span> &gt; myid</div><div class="line">BJIDC-CMM25：echo <span class="number">3</span> &gt; myid</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="3-3安装配置hadoop集群（在BJIDC-CMM23上操作）"><a href="#3-3安装配置hadoop集群（在BJIDC-CMM23上操作）" class="headerlink" title="3.3安装配置hadoop集群（在BJIDC-CMM23上操作）"></a>3.3安装配置hadoop集群（在BJIDC-CMM23上操作）</h4><ul>
<li><p>[x] 解压</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf hadoop-<span class="number">2.4</span>.<span class="number">1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /home/cmm/app/</div></pre></td></tr></table></figure>
</li>
<li><p>[x] 配置HDFS（hadoop2.x所有的配置文件都在$HADOOP_HOME/etc/hadoop目录下）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line">#将hadoop添加到环境变量中</div><div class="line">vi /etc/profile</div><div class="line">export HADOOP_HOME=/home/cmm/app/hadoop-2.4.1</div><div class="line">export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$HADOOP_HOME/bin</div><div class="line">:$HADOOP_HOME/sbin:$PATH			</div><div class="line">#hadoop2.x的配置文件全部在$HADOOP_HOME/etc/hadoop下</div><div class="line">cd /home/cmm/app/hadoop-2.4.1/etc/hadoop</div><div class="line">#修改hadoo-env.sh</div><div class="line">export JAVA_HOME=/usr/java/jdk1.8.0_92</div><div class="line">#修改core-site.xml</div><div class="line">				<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 指定hdfs的nameservice为ns1 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://ns1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 指定hadoop临时目录 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/cmm/app/hadoop-2.4.1/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 指定zookeeper地址 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>ha.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>BJIDC-CMM23:2181,BJIDC-CMM24:2181,BJIDC-CMM25:2181<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">				</div><div class="line">#修改hdfs-site.xml</div><div class="line">				<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--指定hdfs的nameservice为ns1，需要和core-site.xml中的保持一致 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.nameservices<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>ns1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- ns1下面有两个NameNode，分别是nn1，nn2 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.namenodes.ns1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>nn1,nn2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- nn1的RPC通信地址 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.rpc-address.ns1.nn1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span> BJIDC-CMM23:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- nn1的http通信地址 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address.ns1.nn1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span> BJIDC-CMM23:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- nn2的RPC通信地址 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.rpc-address.ns1.nn2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span> BJIDC-CMM24:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- nn2的http通信地址 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address.ns1.nn2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span> BJIDC-CMM24:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 指定NameNode的元数据在JournalNode上的存放位置 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.shared.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>qjournal://BJIDC-CMM23:8485;BJIDC-CMM24:8485;BJIDC-CMM25:8485/ns1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 指定JournalNode在本地磁盘存放数据的位置 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.journalnode.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/cmm/app/hadoop-2.4.1/journal<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 开启NameNode失败自动切换 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.automatic-failover.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 配置失败自动切换实现方式 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.client.failover.proxy.provider.ns1<span class="tag">&lt;/<span class="name">name</span>&gt;</span>				<span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</div><div class="line"><span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!-- 配置隔离机制方法，多个机制用换行分割，即每个机制暂用一行--&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.fencing.methods<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span></div><div class="line">							sshfence</div><div class="line">							shell(/bin/true)</div><div class="line">						<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 使用sshfence隔离机制时需要ssh免登陆 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.fencing.ssh.private-key-files<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/.ssh/id_rsa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 配置sshfence隔离机制超时时间 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.fencing.ssh.connect-timeout<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>30000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">			</div><div class="line">#修改mapred-site.xml</div><div class="line">				<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 指定mr框架为yarn方式 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span>	</div><div class="line">			</div><div class="line">#修改yarn-site.xml</div><div class="line">				<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						   <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						   <span class="tag">&lt;<span class="name">value</span>&gt;</span>BJIDC-CMM25<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">						<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">						   <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">						   <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">						<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">			</div><div class="line">#修改slaves(slaves是指定子节点的位置，因为要在BJIDC-CMM23上启动HDFS、在BJIDC-CMM25启动yarn，所以BJIDC-CMM23上的slaves文件指定的是datanode的位置，BJIDC-CMM25上的slaves文件指定的是nodemanager的位置)</div><div class="line">		BJIDC-CMM23</div><div class="line">		BJIDC-CMM24</div><div class="line">BJIDC-CMM25</div></pre></td></tr></table></figure>
</li>
<li><p>[x] 将配置好的hadoop拷贝到其他节点</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">scp -r <span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span>hadoop<span class="number">-2.4</span><span class="number">.1</span>/ cmm@ BJIDC-CMM24:<span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span></div><div class="line">scp -r <span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span>hadoop<span class="number">-2.4</span><span class="number">.1</span>/ cmm@ BJIDC-CMM25:<span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="3-4配置hbase集群（在BJIDC-CMM23上操作）"><a href="#3-4配置hbase集群（在BJIDC-CMM23上操作）" class="headerlink" title="3.4配置hbase集群（在BJIDC-CMM23上操作）"></a>3.4配置hbase集群（在BJIDC-CMM23上操作）</h4><p>注意：要把hadoop的hdfs-site.xml和core-site.xml 放到hbase/conf下</p>
<ul>
<li><p>[x] 解压(不多说了，和前面的一样)</p>
</li>
<li><p>[x] 修改配置文件，在conf目录下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">#修改hbase-env.sh</div><div class="line">	export JAVA_HOME= /usr/java/jdk1.8.0_92</div><div class="line">	//告诉hbase使用外部的zk</div><div class="line">		export HBASE_MANAGES_ZK=false</div><div class="line"># hbase-site.xml</div><div class="line">		<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 指定hbase在HDFS上存储的路径 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://ns1/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 指定hbase是分布式的 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 指定zk的地址，多个用“,”分割 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>BJIDC-CMM23:2181,BJIDC-CMM24:2181,BJIDC-CMM25:2181<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line"># regionservers</div><div class="line">			BJIDC-CMM24</div><div class="line">			BJIDC-CMM25</div></pre></td></tr></table></figure>
</li>
<li><p>[x] 拷贝hbase到其他节点</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">scp -r <span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span>hbase<span class="number">-0.96</span><span class="number">.2</span>-hadoop2/ cmm@ BJIDC-CMM24:<span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span></div><div class="line">scp -r <span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span>hbase<span class="number">-0.96</span><span class="number">.2</span>-hadoop2/ cmm@ BJIDC-CMM24:<span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="3-5启动集群（第一次启动要严格按照下面的顺序启动）"><a href="#3-5启动集群（第一次启动要严格按照下面的顺序启动）" class="headerlink" title="3.5启动集群（第一次启动要严格按照下面的顺序启动）"></a>3.5启动集群（第一次启动要严格按照下面的顺序启动）</h4><ul>
<li><p>[x] 启动zookeeper集群（分别在BJIDC-CMM23、BJIDC-CMM24、BJIDC-CMM25上启动zk）</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd <span class="meta-keyword">/home/</span>cmm<span class="meta-keyword">/app/</span>zookeeper<span class="number">-3.4</span><span class="number">.5</span><span class="meta-keyword">/bin/</span></div><div class="line">./zkServer.sh start</div><div class="line"><span class="meta">#查看状态：一个leader，两个follower</span></div><div class="line">./zkServer.sh status</div></pre></td></tr></table></figure>
</li>
<li><p>[x] 启动journalnode（分别在BJIDC-CMM23、BJIDC-CMM24、BJIDC-CMM25上执行）</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hadoop-daemon.<span class="keyword">sh </span>start <span class="keyword">journalnode</span></div><div class="line"><span class="comment">#运行jps命令检验，三台机器上多了JournalNode进程</span></div></pre></td></tr></table></figure>
</li>
<li><p>[x] 格式化HDFS</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#在BJIDC-CMM23上执行命令:</div><div class="line">namenode -format</div><div class="line">#格式化后会在根据core-site.xml中的hadoop.tmp.dir配置生成个文件，然后将<span class="regexp">/tmp拷贝到BJIDC-CMM24的/</span>home<span class="regexp">/cmm/</span>app<span class="regexp">/hadoop-2.4.1/</span>下。</div><div class="line">scp -r tmp<span class="regexp">/ cmm@ BJIDC-CMM24: /</span>home<span class="regexp">/cmm/</span>app <span class="regexp">/hadoop-2.4.1/</span></div></pre></td></tr></table></figure>
</li>
<li><p>[x] 格式化ZKFC(在BJIDC-CMM23上执行即可)</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">hdfs</span> zkfc -formatZK</div></pre></td></tr></table></figure>
</li>
<li><p>[x] 启动HDFS(在BJIDC-CMM23上执行)</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="literal">start</span>-dfs.sh</div></pre></td></tr></table></figure>
</li>
<li><p>[x] 启动YARN（在BJIDC-CMM25上执行）</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="literal">start</span>-yarn.sh</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>hadoop-2.4.1配置完毕，可以统计浏览器访问（前提是hosts文件已配置）<br>        http:// BJIDC-CMM23:50070<br>        NameNode ‘ BJIDC-CMM23:9000’ (active)<br>        http:// BJIDC-CMM24:50070<br>        NameNode ‘ BJIDC-CMM24:9000’ (standby)</strong></p>
<ul>
<li>[x] 启动hbase（仅在BJIDC-CMM23上操作）<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./<span class="keyword">bin/ </span>start-hbase.sh</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>通过浏览器访问hbase管理页面BJIDC-CMM23:60010</strong></p>
<h3 id="4-Java-API访问hbase"><a href="#4-Java-API访问hbase" class="headerlink" title="4.Java API访问hbase"></a>4.Java API访问hbase</h3><p>下面是通过Java API来访问hbase。<br>先将下载的包解压，将lib下的jar包导入。主要用到的jar包如下图</p>
<p><img src="/img/3.png" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line">privateConfiguration conf = <span class="keyword">null</span>;</div><div class="line">	</div><div class="line">	<span class="meta">@Before</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</div><div class="line">		conf = HBaseConfiguration.create();<span class="comment">//获取hbase的配置对象</span></div><div class="line">		conf.set(<span class="string">"hbase.zookeeper.quorum"</span>, <span class="string">"BJIDC-CMM23, BJIDC-CMM24, BJIDC-CMM25"</span>);<span class="comment">//指定外部zookeeper集群</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDrop</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line"><span class="comment">//删除表</span></div><div class="line">		HBaseAdmin admin = <span class="keyword">new</span> HBaseAdmin(conf);</div><div class="line">		admin.disableTable(<span class="string">"account"</span>);</div><div class="line">		admin.deleteTable(<span class="string">"account"</span>);</div><div class="line">		admin.close();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPut</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">		<span class="comment">//插入数据</span></div><div class="line">		HTable table = <span class="keyword">new</span> HTable(conf, <span class="string">"user"</span>);</div><div class="line">		Put put = <span class="keyword">new</span> Put(Bytes.toBytes(<span class="string">"rk0003"</span>));</div><div class="line">		put.add(Bytes.toBytes(<span class="string">"info"</span>), Bytes.toBytes(<span class="string">"name"</span>), Bytes.toBytes(<span class="string">"liuyan"</span>));</div><div class="line">		table.put(put);</div><div class="line">		table.close();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGet</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">		<span class="comment">//获取数据</span></div><div class="line">		<span class="comment">//HTablePool pool = new HTablePool(conf, 10);</span></div><div class="line">		<span class="comment">//HTable table = (HTable) pool.getTable("user");</span></div><div class="line">		HTable table = <span class="keyword">new</span> HTable(conf, <span class="string">"user"</span>);</div><div class="line">		Get get = <span class="keyword">new</span> Get(Bytes.toBytes(<span class="string">"rk0001"</span>));</div><div class="line">		<span class="comment">//get.addColumn(Bytes.toBytes("info"), Bytes.toBytes("name"));</span></div><div class="line">		get.setMaxVersions(<span class="number">5</span>);</div><div class="line">		Result result = table.get(get);</div><div class="line">		<span class="comment">//result.getValue(family, qualifier)</span></div><div class="line">		<span class="keyword">for</span>(KeyValue kv : result.list())&#123;</div><div class="line">			String family = <span class="keyword">new</span> String(kv.getFamily());</div><div class="line">			System.out.println(family);</div><div class="line">			String qualifier = <span class="keyword">new</span> String(kv.getQualifier());</div><div class="line">			System.out.println(qualifier);</div><div class="line">			System.out.println(<span class="keyword">new</span> String(kv.getValue()));</div><div class="line">		&#125;</div><div class="line">		table.close();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testScan</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">		<span class="comment">//查询数据</span></div><div class="line">		HTablePool pool = <span class="keyword">new</span> HTablePool(conf, <span class="number">10</span>);</div><div class="line">		HTableInterface table = pool.getTable(<span class="string">"user"</span>);</div><div class="line">		Scan scan = <span class="keyword">new</span> Scan(Bytes.toBytes(<span class="string">"rk0001"</span>), Bytes.toBytes(<span class="string">"rk0002"</span>));</div><div class="line">		scan.addFamily(Bytes.toBytes(<span class="string">"info"</span>));</div><div class="line">		ResultScanner scanner = table.getScanner(scan);</div><div class="line">		<span class="keyword">for</span>(Result r : scanner)&#123;</div><div class="line">			<span class="comment">/**</span></div><div class="line">			for(KeyValue kv : r.list())&#123;</div><div class="line">				String family = new String(kv.getFamily());</div><div class="line">				System.out.println(family);</div><div class="line">				String qualifier = new String(kv.getQualifier());</div><div class="line">				System.out.println(qualifier);</div><div class="line">				System.out.println(new String(kv.getValue()));</div><div class="line">			&#125;</div><div class="line">			*/</div><div class="line">			<span class="keyword">byte</span>[] value = r.getValue(Bytes.toBytes(<span class="string">"info"</span>), Bytes.toBytes(<span class="string">"name"</span>));</div><div class="line">			System.out.println(<span class="keyword">new</span> String(value));</div><div class="line">		&#125;</div><div class="line">		pool.close();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDel</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">		<span class="comment">//删除数据</span></div><div class="line">		HTable table = <span class="keyword">new</span> HTable(conf, <span class="string">"user"</span>);</div><div class="line">		Delete del = <span class="keyword">new</span> Delete(Bytes.toBytes(<span class="string">"rk0001"</span>));</div><div class="line">		del.deleteColumn(Bytes.toBytes(<span class="string">"data"</span>), Bytes.toBytes(<span class="string">"pic"</span>));</div><div class="line">		table.delete(del);</div><div class="line">		table.close();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">		Configuration conf = HBaseConfiguration.create();</div><div class="line">		conf.set(<span class="string">"hbase.zookeeper.quorum"</span>, <span class="string">"hadoop01,hadoop02,hadoop03"</span>);</div><div class="line">		<span class="comment">/*</span></div><div class="line">		*创建表</div><div class="line">		*/</div><div class="line">		HBaseAdmin admin = <span class="keyword">new</span> HBaseAdmin(conf);</div><div class="line">		HTableDescriptor td = <span class="keyword">new</span> HTableDescriptor(<span class="string">"account"</span>);</div><div class="line">		HColumnDescriptor cd = <span class="keyword">new</span> HColumnDescriptor(<span class="string">"info"</span>);</div><div class="line">		cd.setMaxVersions(<span class="number">10</span>);</div><div class="line">		td.addFamily(cd);</div><div class="line">		admin.createTable(td);</div><div class="line">		admin.close();</div><div class="line"></div><div class="line">	&#125;</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2016/08/26/title- hbase集群搭建及JavaAPI访问/" data-id="cisbieedu0000pcre7kv1o7nd" class="article-share-link">分享到</a><div class="tags"></div><div class="post-nav"><a href="/2016/08/11/title- java爬虫之静态页面爬取/" class="next">java爬虫之静态页面爬取</a></div><div data-thread-key="2016/08/26/title- hbase集群搭建及JavaAPI访问/" data-title="hbase集群搭建及JavaAPI访问" data-url="http://yoursite.com/2016/08/26/title- hbase集群搭建及JavaAPI访问/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2016/08/26/title- hbase集群搭建及JavaAPI访问/" data-title="hbase集群搭建及JavaAPI访问" data-url="http://yoursite.com/2016/08/26/title- hbase集群搭建及JavaAPI访问/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/08/26/title- hbase集群搭建及JavaAPI访问/">hbase集群搭建及JavaAPI访问</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/11/title- java爬虫之静态页面爬取/">java爬虫之静态页面爬取</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/05/FirstBlog/">第一篇博客（markdown语法简要规则）</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">WELCOME TO HUANGRONG'S BLOG.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'huangrong'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>